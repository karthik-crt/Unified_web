<div class="user-list-container">

    <div class="table-container">

        <!-- Filters -->
        <div class="filters-container">

            <!-- Search Box -->
            <div class="filter-item">
                <i class="filter-icon cil-search"></i>
                <input type="text" class="filter-input" placeholder="Search by user or mobile..."
                    [(ngModel)]="searchText" (input)="applyFilters()" />
            </div>

            <!-- Status Filter -->
            <div class="filter-item">
                <i class="filter-icon cil-check-circle"></i>
                <select class="filter-select" [(ngModel)]="statusFilter" (change)="applyFilters()">
                    <option value="">All Status</option>
                    <option value="paid">Paid</option>
                    <option value="failed">Failed</option>
                </select>
            </div>

            <!-- Reset Filters -->
            <button class="btn-reset" (click)="resetFilters()">Reset</button>

        </div>

        <!-- Table -->
        <table class="user-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Txn Ref</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Gateway</th>
                    <th>User Mobile</th>
                    <th>Agent Mobile</th>
                    <th>Created At</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let t of transactions">
                    <td>{{ t.id }}</td>
                    <td>{{ t.txn_reference_id }}</td>
                    <td>₹ {{ t.amount }}</td>

                    <td>
                        <span class="status-badge" [ngClass]="t.status === 'paid' ? 'active' : 'inactive'">
                            {{ t.status }}
                        </span>
                    </td>

                    <td>{{ t.gateway }}</td>
                    <td>{{ t.user_mobile }}</td>
                    <td>{{ t.agent_mobile || '—' }}</td>
                    <td>{{ t.created_at | date:'medium' }}</td>
                </tr>
            </tbody>
        </table>

    </div>

    <!-- Pagination -->
    <div class="pagination">
        <button [disabled]="page === 1" (click)="changePage(page - 1)">Previous</button>

        <span class="page-info">
            Page {{ page }} of {{ totalPages }}
        </span>

        <button [disabled]="page === totalPages" (click)="changePage(page + 1)">Next</button>
    </div>

</div>

<!-- Loader -->
<div class="loading-overlay" *ngIf="loading">
    <div class="loader-premium"></div>
    <p>Loading please wait...</p>
</div>