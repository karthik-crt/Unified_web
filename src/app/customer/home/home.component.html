<div class="bg-light min-vh-100">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <c-container>
            <a class="navbar-brand" href="#">Insurance Portal</a>
            <div class="ms-auto">
                <button cButton color="light" size="sm" (click)="logout()">Logout</button>
            </div>
        </c-container>
    </nav>

    <c-container class="py-4">
        <c-row class="mb-4">
            <c-col>
                <h2>Welcome, {{ userPhone }}</h2>
                <p class="text-muted">Manage your insurance policies and explore new products</p>
            </c-col>
        </c-row>

        <c-row class="mb-4">
            <c-col md="4">
                <c-card class="text-white bg-primary">
                    <c-card-body>
                        <h5>Active Policies</h5>
                        <h2>{{ activePolicies }}</h2>
                    </c-card-body>
                </c-card>
            </c-col>

            <c-col md="4">
                <c-card class="text-white bg-success">
                    <c-card-body>
                        <h5>Total Coverage</h5>
                        <h2>₹{{ totalCoverage | number }}</h2>
                    </c-card-body>
                </c-card>
            </c-col>

            <c-col md="4">
                <c-card class="text-white bg-info">
                    <c-card-body>
                        <h5>KYC Status</h5>
                        <h2>{{ kycStatus }}</h2>
                    </c-card-body>
                </c-card>
            </c-col>
        </c-row>

        <c-row class="mb-4">
            <c-col>
                <c-card>
                    <c-card-header>
                        <strong>Quick Actions</strong>
                    </c-card-header>
                    <c-card-body>
                        <div class="d-flex gap-2 flex-wrap">
                            <button cButton color="primary" (click)="navigateTo('/products')">
                                Browse Insurance Products
                            </button>

                            <button cButton color="success" (click)="navigateTo('/kyc')">
                                Complete KYC
                            </button>

                            <button cButton color="info" (click)="navigateTo('/profile')">
                                Update Profile
                            </button>
                        </div>
                    </c-card-body>
                </c-card>
            </c-col>
        </c-row>

        <c-row>
            <c-col>
                <c-card>
                    <c-card-header>
                        <strong>My Policies</strong>
                    </c-card-header>

                    <c-card-body>
                        <div *ngIf="policies.length === 0" class="text-center py-4">
                            <p class="text-muted">No policies found</p>
                            <button cButton color="primary" (click)="navigateTo('/products')">
                                Browse Products
                            </button>
                        </div>

                        <div *ngIf="policies.length > 0" class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Policy Number</th>
                                        <th>Product</th>
                                        <th>Coverage</th>
                                        <th>Premium</th>
                                        <th>Status</th>
                                        <th>Valid Until</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr *ngFor="let policy of policies">
                                        <td>{{ policy.policy_number }}</td>
                                        <td>{{ policy.product_name }}</td>
                                        <td>₹{{ policy.coverage_amount | number }}</td>
                                        <td>₹{{ policy.premium_amount | number }}</td>
                                        <td>
                                            <span class="badge" [ngClass]="{
                          'bg-success': policy.status === 'active',
                          'bg-danger': policy.status === 'expired',
                          'bg-warning': policy.status === 'cancelled'
                        }">
                                                {{ policy.status }}
                                            </span>
                                        </td>
                                        <td>{{ policy.end_date | date }}</td>
                                        <td>
                                            <button cButton color="info" size="sm" (click)="viewPolicy(policy.id)">
                                                View
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </c-card-body>
                </c-card>
            </c-col>
        </c-row>
    </c-container>
</div>